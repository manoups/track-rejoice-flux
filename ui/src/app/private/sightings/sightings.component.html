<section class="content">
  <h1 class="page-title">Sightings</h1>

  <!-- Fixed header table -->
  <div class="table-frame">
    <table class="table table-striped table-hover table-fixed">
      <colgroup>
        <col style="width: 25%;">
        <col style="width: 20%;">
        <col style="width: 25%;">
        <col style="width: 15%;">
        <col style="width: 15%;">
      </colgroup>
      <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Owner</th>
        <th scope="col">Created At</th>
        <th scope="col">Remove after matching</th>
        <th scope="col">Action</th>
      </tr>
      </thead>
    </table>

    <!-- Scrollable body with virtual rows -->
    <cdk-virtual-scroll-viewport
      class="viewport"
      [itemSize]="44"
      (scrolledIndexChange)="onScrollIndexChange($event)">

      <table class="table table-striped table-hover table-fixed">
        <colgroup>
          <col style="width: 25%;">
          <col style="width: 20%;">
          <col style="width: 25%;">
          <col style="width: 15%;">
          <col style="width: 15%;">
        </colgroup>

        <tbody>
        <tr *cdkVirtualFor="let sighting of sightings(); trackBy: trackBySightingId">
          <td>{{ sighting.sightingId }}</td>
          <td>{{ sighting.ownerId }}</td>
          <td>{{ sighting.timestamp | date:'yyyy-MM-dd HH:mm:ss' }}</td>
          <td>{{ sighting.removeAfterMatching }}</td>
          <td>
            <button class="btn btn-outline-danger btn-sm" (click)="deleteSighting(sighting)">
              Delete
            </button>
            <a routerLink="/sightings/{{ sighting.sightingId }}" class="btn btn-primary">View</a>
          </td>
        </tr>

        @if (sightings().length === 0) {
          <tr>
            <td colspan="4">No sightings yet.</td>
          </tr>
        }
        </tbody>
      </table>

    </cdk-virtual-scroll-viewport>
  </div>
</section>
